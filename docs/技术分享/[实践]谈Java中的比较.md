---
password: ""
icon: ""
date: "2023-12-27"
type: Post
category: æŠ€æœ¯åˆ†äº«
slug: java-compare
tags:
  - Java
summary: ""
title: "[å®è·µ]è°ˆJavaä¸­çš„æ¯”è¾ƒ"
status: Published
urlname: a657dc01-1842-48f0-99f0-1eec78437ce0
updated: "2023-12-27 09:56:00"
---

> ğŸ˜€ ä»Šå¤© CR ä»£ç æ—¶ï¼Œçœ‹åˆ°æœ‰äººä½¿ç”¨ `!=` æ¥æ¯”è¾ƒ `Integer`ç±»å‹ä»¥åŠ`String`ç±»å‹çš„å¤§å°ï¼Œç¼–è¯‘å™¨æç¤ºï¼š  
> `Number object are compared using â€˜!=â€™, not â€˜equals()â€™` ï¼Œä»Šå¤©å°±æ¥è¯´è¯´ Java ä¸­çš„ç±»å‹æ¯”è¾ƒå§ã€‚

# ç›¸ç­‰æ¯”è¾ƒ

ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨`!=` æˆ–è€… `==` æ¥æ¯”è¾ƒ Integer å’Œ String æ˜¯å¦ç›¸ç­‰ï¼Ÿ

`!=` æˆ–è€… `==` ä½¿ç”¨æ—¶ï¼Œå®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸æ˜¯åŒä¸€ä¸ªå¼•ç”¨çš„è¯ï¼Œä¼šè¿”å›ä¸ç¬¦åˆé¢„æœŸçš„ç»“æœã€‚

**ç¤ºä¾‹ 1ï¼š**

```java
jshell> Integer i1 = 128;
i1 ==> 128

jshell> Integer i2 = 128;
i2 ==> 128

jshell> System.out.print(i1==i2)
false
```

**ç¤ºä¾‹ 2ï¼š**

```java
jshell> String s1 = "kuang";
s1 ==> "kuang"

jshell> String s2 = new String("kuang");
s2 ==> "kuang"

jshell> System.out.print(s1==s2);
false
```

# åŸç†åˆ†æ

å¯¹äºç»å¸¸ä½¿ç”¨ C++çš„åŒå­¦æ¥è¯´ï¼Œå¾ˆå®¹ç”¨é”™ã€‚

åœ¨ Java ä¸­ï¼Œå¯¹äºåŸºæœ¬ç±»å‹çš„æ¯”è¾ƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `!=` æˆ–è€… `==` ã€‚`Integer` æ˜¯ åŸºæœ¬ç±»å‹ `int` çš„åŒ…è£…ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚`String`ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä½¿ç”¨ `!=` æˆ–è€… `==` éƒ½æ˜¯æ¯”è¾ƒå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å€¼ï¼Œæ‰€ä»¥é€»è¾‘ä¸Šä¼šæœ‰é—®é¢˜ã€‚

```java
jshell> Integer i5 = 129;
i5 ==> 129

jshell> Integer i6 = 129;
i6 ==> 129

jshell> System.identityHashCode(i5);
$15 ==> 485041780

jshell> System.identityHashCode(i6);
$16 ==> 117244645
```

å¯ä»¥çœ‹åˆ°ï¼Œi5 å’Œ i6 ä¸¤è€…çš„åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ¯”è¾ƒçš„è¯ï¼Œä½¿ç”¨ `==` è‚¯å®šæ˜¯è¿”å› false äº†ã€‚

åŒç†ï¼Œs7 å’Œ s8 ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚

```java
jshell> String s7 = "kuang";
s7 ==> "kuang"

jshell> String s8 = new String("kuang");
s8 ==> "kuang"

jshell> String s9 = "kuang";
s9 ==> "kuang"

jshell> String s10 = new String("kuang");
s10 ==> "kuang"

jshell> System.identityHashCode(s7);
$19 ==> 832947102

jshell> System.identityHashCode(s8);
$20 ==> 507084503

jshell> System.identityHashCode(s9);
$22 ==> 832947102

jshell> System.identityHashCode(s10);
$24 ==> 1845904670
```

åœ¨ Java ä¸­ï¼Œå­—ç¬¦ä¸²æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼šä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨åŒå¼•å·åˆ›å»ºï¼Œå¦‚ `String s7 = "kuang"`ï¼›å¦ä¸€ç§æ˜¯é€šè¿‡`new`å…³é”®å­—åˆ›å»ºï¼Œå¦‚ `String s8 = new String("kuang")`ã€‚

1. å½“æˆ‘ä»¬ä½¿ç”¨åŒå¼•å·åˆ›å»ºå­—ç¬¦ä¸²æ—¶ï¼ŒJava ä¼šé¦–å…ˆåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å€¼ä¸º"kuang"çš„å­—ç¬¦ä¸²ã€‚å¦‚æœå­˜åœ¨ï¼Œå°±ç›´æ¥è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œå°±åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–°å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚**è¿™ç§æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œå¯ä»¥èŠ‚çœå†…å­˜**ã€‚
2. å½“æˆ‘ä»¬ä½¿ç”¨`new`å…³é”®å­—åˆ›å»ºå­—ç¬¦ä¸²æ—¶ï¼ŒJava ä¼šåœ¨å †å†…å­˜ä¸­**åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡**ï¼Œä¸ç®¡å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦å·²ç»å­˜åœ¨å€¼ä¸º"kuang"çš„å­—ç¬¦ä¸²ã€‚**è¿™ç§æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œå³ä½¿å†…å®¹ç›¸åŒï¼Œä¹Ÿä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºå¤šä»½**ã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`s7`ã€`s8`ã€`s9`ã€`s10`è™½ç„¶å†…å®¹ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬åœ¨å†…å­˜ä¸­çš„ä½ç½®æ˜¯ä¸åŒçš„ã€‚`s7`æ˜¯åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºçš„ï¼Œè€Œ`s8`æ˜¯åœ¨å †å†…å­˜ä¸­åˆ›å»ºçš„ã€‚`System.identityHashCode()`æ–¹æ³•è¿”å›çš„æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œæ‰€ä»¥`s7`å’Œ`s8`çš„åœ°å€æ˜¯ä¸åŒçš„ã€‚

> ğŸ”¥ **ç‰¹åˆ«æ³¨æ„**  
> åœ¨ Java ä¸­ï¼Œ`Integer`æ˜¯ä¸€ä¸ªç±»ï¼Œç”¨äºå°è£…åŸºæœ¬æ•°æ®ç±»å‹`int`çš„æ•°æ®ã€‚`Integer`çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶å€¼å°±ä¸èƒ½æ”¹å˜ã€‚
>
> Java ä¸ºäº†æé«˜æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œå¯¹-128 åˆ° 127 ä¹‹é—´çš„`Integer`å¯¹è±¡è¿›è¡Œäº†ç¼“å­˜ï¼Œè¿™äº›å¯¹è±¡åœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨æ—¶å°±å·²ç»åˆ›å»ºå¥½äº†ã€‚å½“æˆ‘ä»¬è°ƒç”¨`Integer.valueOf()`æ–¹æ³•æˆ–è€…ç›´æ¥èµ‹å€¼ï¼ˆå¦‚`Integer i = 127`ï¼‰æ—¶ï¼Œå¦‚æœå€¼åœ¨-128 åˆ° 127 ä¹‹é—´ï¼ŒJava å°±ä¼šç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œä¸¤ä¸ªç›¸åŒå€¼çš„`Integer`å¯¹è±¡çš„`System.identityHashCode()`è¿”å›çš„å€¼æ˜¯ç›¸åŒçš„ã€‚
>
> ç„¶è€Œï¼Œå¯¹äºè¶…è¿‡è¿™ä¸ªèŒƒå›´çš„å€¼ï¼Œå¦‚ 129ï¼ŒJava ä¼šæ–°åˆ›å»ºä¸€ä¸ª`Integer`å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå³ä½¿ä¸¤ä¸ª`Integer`å¯¹è±¡çš„å€¼ç›¸åŒï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­çš„åœ°å€ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œ`System.identityHashCode()`è¿”å›çš„å€¼ä¹Ÿæ˜¯ä¸åŒçš„ã€‚
>
> ```java
> jshell> Integer i3 = 12;
> i3 ==> 12
>
> jshell> Integer i4 = 12;
> i4 ==> 12
>
> jshell> System.out.print(i3==i4);
> true
> ```

# æ­£ç¡®ä½¿ç”¨æ–¹æ³•ï¼Ÿ

ä½¿ç”¨ `equals` ï¼Œå®ƒæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å€¼æ˜¯å¦ä¸€è‡´ã€‚

**Integer ç±»å‹ï¼š**

```java
Integer i1 = 1200;
Integer i2 = 1200;
boolean isEqual = i1.equals(i2);
```

**String ç±»å‹ï¼š**

```java
String str1 = "hello";
String str2 = "world";
boolean isEqual = str1.equals(str2); // false
int comparisonResult = str1.compareTo(str2); // negative value, because "hello" is less than "world"
```
