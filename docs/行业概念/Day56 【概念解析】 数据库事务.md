---
password: ""
icon: ""
date: "2023-11-16"
type: Post
category: è¡Œä¸šæ¦‚å¿µ
slug: industry-day56
tags:
  - è¡Œä¸šæ¦‚å¿µ
  - æ–‡å­—
  - æ€è€ƒ
  - æ•°æ®åº“
  - MySQL
summary: ""
title: Day56 ã€æ¦‚å¿µè§£æã€‘ æ•°æ®åº“äº‹åŠ¡
status: Published
cover: "https://image.kuangyichen.com/image/db_tx.webp"
urlname: b8166475-7087-42de-ae6d-0322521b323a
updated: "2023-11-16 15:18:00"
---

# æ•´ç†å®šä¹‰

## äº‹åŠ¡ï¼ˆtransactionï¼‰

> Transactions are atomic units of work that can beÂ ***committed***Â orÂ ***rolled back***. When a transaction makes multiple changes to the database, either all the changes succeed when the transaction is committed, or all the changes are undone when the transaction is rolled back.

    Database transactions, as implemented byÂ `InnoDB`, have properties that are collectively known by the acronymÂ _**ACID**_, for atomicity, consistency, isolation, and durability.

`äº‹åŠ¡`æ˜¯å¯ä»¥æäº¤æˆ–å›æ»šçš„<u>åŸå­å·¥ä½œå•å…ƒ</u>ã€‚ å½“ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®åº“è¿›è¡Œå¤šæ¬¡æ›´æ”¹æ—¶ï¼Œè¦ä¹ˆåœ¨æäº¤äº‹åŠ¡æ—¶æ‰€æœ‰æ›´æ”¹éƒ½æˆåŠŸï¼Œè¦ä¹ˆåœ¨äº‹åŠ¡å›æ»šæ—¶æ‰€æœ‰æ›´æ”¹éƒ½è¢«æ’¤æ¶ˆã€‚ç”± InnoDB å®ç°çš„æ•°æ®åº“äº‹åŠ¡å…·æœ‰ç»Ÿç§°ä¸ºç¼©å†™è¯ ACID çš„å±æ€§ï¼Œå³åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚

MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ å³éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿè¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ï¼Œæ–‡ç« ç­‰ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±æ„æˆä¸€ä¸ªäº‹åŠ¡ï¼

## äº‹åŠ¡çš„åŸºæœ¬ç‰¹æ€§â€”â€”ACID

`ACID` æ˜¯æ•°æ®åº“äº‹åŠ¡çš„å››ä¸ªåŸºæœ¬ç‰¹æ€§ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚

## äº‹åŠ¡çš„éš”ç¦»çº§åˆ«

æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰ 4 ç§ï¼Œç”±ä½åˆ°é«˜åˆ†åˆ«ä¸º

- **READ-UNCOMMITTED(è¯»æœªæäº¤)**ï¼šæœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚
- **READ-COMMITTED(è¯»å·²æäº¤)**ï¼šå…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚
- **REPEATABLE-READ(å¯é‡å¤è¯»)**ï¼šå¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚
- **SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)**ï¼šæœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä» ACID çš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠ[å¹»è¯»](https://www.zhihu.com/search?q=%E5%B9%BB%E8%AF%BB&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A1935044903%7D)ã€‚

| äº‹åŠ¡éš”ç¦»çº§åˆ«                 | è¯»æ•°æ®ä¸€è‡´æ€§                             | è„è¯» | ä¸å¯é‡å¤è¯» | å¹»è¯» |
| ---------------------------- | ---------------------------------------- | ---- | ---------- | ---- |
| è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ | æœ€ä½çº§åˆ«ï¼Œåªèƒ½ä¿è¯ä¸è¯»å–ç‰©ç†ä¸ŠæŸåçš„æ•°æ® | âœ…   | âœ…         | âœ…   |
| è¯»å·²æäº¤ï¼ˆRead Committedï¼‰   | è¯­å¥çº§åˆ«                                 | âŒ   | âœ…         | âœ…   |
| å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰  | äº‹åŠ¡çº§åˆ«                                 | âŒ   | âŒ         | âœ…   |
| ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰       | æœ€é«˜çº§åˆ«                                 | âŒ   | âŒ         | âŒ   |

# å¤è¿°å±•å¼€

## ACID å±•å¼€å­¦ä¹ 

1. **åŸå­æ€§ï¼ˆAtomicityï¼‰**ï¼šåŸå­æ€§ç¡®ä¿äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚å¦‚æœäº‹åŠ¡ä¸­çš„ä»»ä½•æ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªäº‹åŠ¡å°†è¢«å›æ»šåˆ°åˆå§‹çŠ¶æ€ï¼Œä¸ä¼šå¯¹æ•°æ®åº“äº§ç”Ÿä»»ä½•å½±å“ã€‚

   ç¤ºä¾‹ SQLï¼š

   ```sql
   START TRANSACTION;
   UPDATE accounts SET balance = balance - 100 WHERE id = 1;
   INSERT INTO transaction_history (account_id, amount) VALUES (1, 100);
   COMMIT;
   ```

   åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæ›´æ–°è´¦æˆ·ä½™é¢å’Œæ’å…¥äº¤æ˜“å†å²è®°å½•çš„ä»»ä½•ä¸€æ¡è¯­å¥å¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å°†è¢«å›æ»šï¼Œä¸ä¼šå¯¹æ•°æ®åº“åšå‡ºä»»ä½•æ›´æ”¹ã€‚

2. **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**ï¼šä¸€è‡´æ€§ç¡®ä¿äº‹åŠ¡åœ¨å¼€å§‹å’Œç»“æŸæ—¶æ•°æ®åº“çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚è¿™æ„å‘³ç€äº‹åŠ¡å¿…é¡»éµå®ˆé¢„å®šä¹‰çš„è§„åˆ™å’Œçº¦æŸï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚

   ç¤ºä¾‹ SQLï¼š

   ```sql
   START TRANSACTION;
   UPDATE accounts SET balance = balance - 100 WHERE id = 1;
   INSERT INTO transaction_history (account_id, amount) VALUES (1, 100);
   COMMIT;

   ```

   åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæ›´æ–°è´¦æˆ·ä½™é¢å¯¼è‡´ä½™é¢ä¸ºè´Ÿæ•°ï¼Œäº‹åŠ¡å°†è¢«å›æ»šï¼Œä»¥ä¿æŒæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚

3. **éš”ç¦»æ€§ï¼ˆIsolationï¼‰**ï¼šéš”ç¦»æ€§ç¡®ä¿å¹¶å‘æ‰§è¡Œçš„äº‹åŠ¡ç›¸äº’éš”ç¦»ï¼Œä½¿å®ƒä»¬çœ‹èµ·æ¥åƒæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ã€‚æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥åœ¨å®Œå…¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä»¥é¿å…æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚

   ç¤ºä¾‹ SQLï¼š

   ```sql
   START TRANSACTION;
   SELECT balance FROM accounts WHERE id = 1;
   -- å¹¶å‘äº‹åŠ¡å¯èƒ½ä¼šä¿®æ”¹è´¦æˆ·ä½™é¢UPDATE accounts SET balance = balance + 50 WHERE id = 1;
   COMMIT;
   ```

   åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæœ‰å…¶ä»–å¹¶å‘äº‹åŠ¡åŒæ—¶ä¿®æ”¹è´¦æˆ·ä½™é¢ï¼Œæ ¹æ®éš”ç¦»æ€§çš„è¦æ±‚ï¼Œè¿™äº›äº‹åŠ¡åº”è¯¥åœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä»¥é¿å…æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚

4. **æŒä¹…æ€§ï¼ˆDurabilityï¼‰**ï¼šæŒä¹…æ€§ç¡®ä¿ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œå…¶ç»“æœå°†æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå³ä½¿åœ¨ç³»ç»Ÿæ•…éšœæˆ–å´©æºƒçš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å·²æäº¤çš„äº‹åŠ¡å¯¹æ•°æ®åº“çš„æ›´æ”¹åº”è¯¥æ˜¯æ°¸ä¹…çš„ã€‚

   ç¤ºä¾‹ SQLï¼š

   ```sql
   START TRANSACTION;
   UPDATE accounts SET balance = balance - 100 WHERE id = 1;
   INSERT INTO transaction_history (account_id, amount) VALUES (1, 100);
   COMMIT;

   ```

   åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œæ›´æ–°è´¦æˆ·ä½™é¢å’Œæ’å…¥äº¤æ˜“å†å²è®°å½•çš„ç»“æœå°†æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå³ä½¿åœ¨ç³»ç»Ÿæ•…éšœæˆ–å´©æºƒçš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

è¿™äº›æ˜¯ ACID ç‰¹æ€§åœ¨ MySQL ä¸­çš„è§£é‡Šå’Œç¤ºä¾‹ã€‚ACID ç‰¹æ€§ç¡®ä¿äº†æ•°æ®åº“äº‹åŠ¡çš„å¯é æ€§ã€ä¸€è‡´æ€§å’ŒæŒä¹…æ€§ï¼Œä½¿å¾—æ•°æ®åº“æ“ä½œæ›´åŠ å¯é å’Œå¯æ§ã€‚

## äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ä¸å¹¶å‘é—®é¢˜

ä»¥ä¸‹æ˜¯å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹å¯èƒ½å‡ºç°çš„æƒ…å†µï¼Œä»¥åŠä¸è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„å…³ç³»ï¼š

1. è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼šåœ¨è¿™ä¸ªçº§åˆ«ï¼Œäº‹åŠ¡ A å¯ä»¥è¯»å–äº‹åŠ¡ B æœªæäº¤çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡ B æ­£åœ¨å°è¯•æ›´æ–°ä¸€æ¡è®°å½•ï¼Œä½†è¿˜æœªæäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡ A è¯»å–äº†è¿™æ¡è®°å½•ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´è„è¯»ï¼Œå› ä¸ºäº‹åŠ¡ B å¯èƒ½åœ¨ä¹‹åå›æ»šï¼Œé‚£ä¹ˆäº‹åŠ¡ A è¯»å–çš„æ•°æ®å°±æ˜¯æ— æ•ˆçš„ã€‚
2. è¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼šåœ¨è¿™ä¸ªçº§åˆ«ï¼Œäº‹åŠ¡ A åªèƒ½è¯»å–äº‹åŠ¡ B å·²ç»æäº¤çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡ A è¯»å–äº†ä¸€æ¡è®°å½•ï¼Œç„¶åäº‹åŠ¡ B æ›´æ–°äº†è¿™æ¡è®°å½•å¹¶æäº¤ï¼Œå½“äº‹åŠ¡ A å†æ¬¡è¯»å–è¿™æ¡è®°å½•æ—¶ï¼Œå°±ä¼šå‘ç°æ•°æ®å·²ç»æ”¹å˜ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´ä¸å¯é‡å¤è¯»ã€‚
3. å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼šåœ¨è¿™ä¸ªçº§åˆ«ï¼Œäº‹åŠ¡ A åœ¨åŒä¸€äº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œé™¤éæ•°æ®è¢«äº‹åŠ¡ A è‡ªå·±ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡ A è¯»å–äº†ä¸€ä¸ªèŒƒå›´å†…çš„æ‰€æœ‰è®°å½•ï¼Œç„¶åäº‹åŠ¡ B æ’å…¥äº†ä¸€ä¸ªæ–°çš„è®°å½•å¹¶æäº¤ï¼Œå½“äº‹åŠ¡ A å†æ¬¡è¯»å–è¿™ä¸ªèŒƒå›´çš„è®°å½•æ—¶ï¼Œå°±ä¼šå‘ç°æœ‰ä¸€ä¸ªæ–°çš„è®°å½•ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´å¹»è¯»ã€‚
4. ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼šè¿™æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡ A å’Œäº‹åŠ¡ B ä¼šè¢«å¼ºåˆ¶ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚ä½†æ˜¯ï¼Œè¿™ç§çº§åˆ«çš„éš”ç¦»æ€§èƒ½æœ€å·®ï¼Œå› ä¸ºäº‹åŠ¡æ²¡æœ‰å¹¶å‘æ‰§è¡Œçš„å¯èƒ½ã€‚

| éš”ç¦»çº§åˆ«                     | ç‰¹ç‚¹                                                                         | å¹¶å‘é—®é¢˜                                                                                                                                                                                              |
| ---------------------------- | ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ | ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ®ã€‚è¿™æ˜¯æœ€ä½çš„éš”ç¦»çº§åˆ«ã€‚                 | å¯èƒ½ä¼šå¯¼è‡´è„è¯»ï¼ˆDirty Readï¼Œè¯»å–åˆ°å…¶ä»–æœªæäº¤äº‹åŠ¡çš„æ•°æ®ï¼‰ã€ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Readï¼ŒåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®è¿”å›çš„ç»“æœæœ‰æ‰€ä¸åŒï¼‰å’Œå¹»è¯»ï¼ˆPhantom Readï¼ŒåŒä¸€äº‹åŠ¡ä¸¤æ¬¡æŸ¥è¯¢çš„ç»“æœä¸ä¸€è‡´ï¼‰ç­‰é—®é¢˜ã€‚ |
| è¯»å·²æäº¤ï¼ˆRead Committedï¼‰   | ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å¦ä¸€ä¸ªå·²æäº¤äº‹åŠ¡çš„æ•°æ®ã€‚è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿçš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚ | å¯ä»¥é¿å…è„è¯»ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚                                                                                                                                                          |
| å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰  | åœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ä¼šè¿”å›ç›¸åŒçš„ç»“æœï¼Œé™¤éæ•°æ®è¢«æœ¬äº‹åŠ¡è‡ªå·±ä¿®æ”¹ã€‚   | å¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´å¹»è¯»ã€‚**åœ¨ MySQL InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œå¯é‡å¤è¯»æ˜¯é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œå¹¶ä¸”é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰è§£å†³äº†å¹»è¯»é—®é¢˜ã€‚**                                                  |
| ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰       | æœ€ä¸¥æ ¼çš„éš”ç¦»çº§åˆ«ã€‚äº‹åŠ¡ä¸²è¡ŒåŒ–é¡ºåºæ‰§è¡Œï¼Œé¿å…äº†è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚         | å¯ä»¥é¿å…æ‰€æœ‰å¹¶å‘é—®é¢˜ï¼Œä½†æ€§èƒ½æœ€å·®ï¼Œå› ä¸ºäº‹åŠ¡å®Œå…¨ä¸²è¡Œæ‰§è¡Œã€‚                                                                                                                                              |

éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«å’Œæ•°æ®è®¿é—®çš„å¹¶å‘æ€§æ˜¯å¯¹ç«‹çš„ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜å¹¶å‘æ€§å°±è¶Šå·®ã€‚æ‰€ä»¥è¦æ ¹æ®å…·ä½“çš„åº”ç”¨æ¥ç¡®å®šåˆé€‚çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè¿™ä¸ªåœ°æ–¹æ²¡æœ‰ä¸‡èƒ½çš„åŸåˆ™ã€‚

## **å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜**

- **æ›´æ–°ä¸¢å¤±ï¼ˆLost Update)**ï¼šäº‹åŠ¡ A å’Œäº‹åŠ¡ B é€‰æ‹©åŒä¸€è¡Œï¼Œç„¶ååŸºäºæœ€åˆé€‰å®šçš„å€¼æ›´æ–°è¯¥è¡Œæ—¶ï¼Œç”±äºä¸¤ä¸ªäº‹åŠ¡éƒ½ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ï¼Œå°±ä¼šå‘ç”Ÿä¸¢å¤±æ›´æ–°é—®é¢˜
- **è„è¯»(Dirty Reads)**ï¼šäº‹åŠ¡ A è¯»å–äº†äº‹åŠ¡ B æ›´æ–°çš„æ•°æ®ï¼Œç„¶å B å›æ»šæ“ä½œï¼Œé‚£ä¹ˆ A è¯»å–åˆ°çš„æ•°æ®æ˜¯è„æ•°æ®
- **ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Reads)**ï¼šäº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡ A å¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœä¸ä¸€è‡´ã€‚
- **å¹»è¯»ï¼ˆPhantom Reads)**ï¼šå¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ A è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ B æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œäº‹åŠ¡ A å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚

> ğŸ’¡ **å¹»è¯»\*\***å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«ï¼š\*\*
>
> - **ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹**ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼ŒåŒæ ·çš„æ¡ä»¶ï¼Œç¬¬ä¸€æ¬¡è¯»çš„æ•°æ®å’Œç¬¬äºŒæ¬¡è¯»çš„æ•°æ®ä¸ä¸€æ ·ã€‚ï¼ˆå› ä¸ºä¸­é—´æœ‰å…¶ä»–äº‹åŠ¡æäº¤äº†ä¿®æ”¹ï¼‰
> - **å¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤**ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼ŒåŒæ ·çš„æ¡ä»¶,ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ ·ã€‚ï¼ˆå› ä¸ºä¸­é—´æœ‰å…¶ä»–äº‹åŠ¡æäº¤äº†æ’å…¥/åˆ é™¤ï¼‰

    - **ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹**ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼ŒåŒæ ·çš„æ¡ä»¶ï¼Œç¬¬ä¸€æ¬¡è¯»çš„æ•°æ®å’Œç¬¬äºŒæ¬¡è¯»çš„æ•°æ®ä¸ä¸€æ ·ã€‚ï¼ˆå› ä¸ºä¸­é—´æœ‰å…¶ä»–äº‹åŠ¡æäº¤äº†ä¿®æ”¹ï¼‰
    - **å¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤**ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼ŒåŒæ ·çš„æ¡ä»¶,ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ ·ã€‚ï¼ˆå› ä¸ºä¸­é—´æœ‰å…¶ä»–äº‹åŠ¡æäº¤äº†æ’å…¥/åˆ é™¤ï¼‰

## **å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜çš„è§£å†³åŠæ³•ï¼š**

- â€œæ›´æ–°ä¸¢å¤±â€é€šå¸¸æ˜¯åº”è¯¥å®Œå…¨é¿å…çš„ã€‚ä½†é˜²æ­¢æ›´æ–°ä¸¢å¤±ï¼Œå¹¶ä¸èƒ½å•é æ•°æ®åº“äº‹åŠ¡æ§åˆ¶å™¨æ¥è§£å†³ï¼Œéœ€è¦åº”ç”¨ç¨‹åºå¯¹è¦æ›´æ–°çš„æ•°æ®åŠ å¿…è¦çš„é”æ¥è§£å†³ï¼Œå› æ­¤ï¼Œé˜²æ­¢æ›´æ–°ä¸¢å¤±åº”è¯¥æ˜¯åº”ç”¨çš„è´£ä»»ã€‚
- â€œè„è¯»â€ ã€ â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€ ï¼Œå…¶å®éƒ½æ˜¯æ•°æ®åº“è¯»ä¸€è‡´æ€§é—®é¢˜ï¼Œå¿…é¡»ç”±æ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³ï¼š
- ä¸€ç§æ˜¯åŠ é”ï¼šåœ¨è¯»å–æ•°æ®å‰ï¼Œå¯¹å…¶åŠ é”ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚
- å¦ä¸€ç§æ˜¯æ•°æ®å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMultiVersion Concurrency Controlï¼Œç®€ç§° MVCC æˆ– MCCï¼‰ï¼Œä¹Ÿç§°ä¸ºå¤šç‰ˆæœ¬æ•°æ®åº“ï¼šä¸ç”¨åŠ ä»»ä½•é”ï¼Œ é€šè¿‡ä¸€å®šæœºåˆ¶ç”Ÿæˆä¸€ä¸ªæ•°æ®è¯·æ±‚æ—¶é—´ç‚¹çš„ä¸€è‡´æ€§æ•°æ®å¿«ç…§ ï¼ˆSnapshot)ï¼Œå¹¶ç”¨è¿™ä¸ªå¿«ç…§æ¥æä¾›ä¸€å®šçº§åˆ« ï¼ˆè¯­å¥çº§æˆ–äº‹åŠ¡çº§ï¼‰ çš„ä¸€è‡´æ€§è¯»å–ã€‚ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œå¥½è±¡æ˜¯æ•°æ®åº“å¯ä»¥æä¾›åŒä¸€æ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ã€‚

# ç†è§£ä½“ä¼š

å­¦ä¹ æ•°æ®åº“äº‹åŠ¡æ˜¯ç†è§£å’ŒæŒæ¡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„é‡è¦éƒ¨åˆ†ã€‚äº‹åŠ¡ä¸ä»…æ˜¯æ•°æ®åº“æ“ä½œçš„åŸºæœ¬å•ä½ï¼Œè€Œä¸”æ˜¯ä¿è¯æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§çš„å…³é”®æœºåˆ¶ã€‚å› æ­¤ï¼Œå¯¹äº‹åŠ¡çš„æ·±å…¥ç†è§£å¯¹äºä»»ä½•ä½¿ç”¨æˆ–è®¾è®¡æ•°æ®åº“ç³»ç»Ÿçš„äººæ¥è¯´éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚

é¦–å…ˆï¼Œç†è§£äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µå’Œç‰¹æ€§æ˜¯å­¦ä¹ äº‹åŠ¡çš„ç¬¬ä¸€æ­¥ã€‚äº‹åŠ¡æ˜¯ä¸€ç³»åˆ—æ•°æ®åº“æ“ä½œçš„é›†åˆï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚è¿™ç§â€œå…¨æœ‰æˆ–å…¨æ— â€çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡çš„åŸå­æ€§ï¼Œæ˜¯ç†è§£äº‹åŠ¡çš„å…³é”®ã€‚æ­¤å¤–ï¼Œäº‹åŠ¡è¿˜æœ‰å…¶ä»–é‡è¦çš„ç‰¹æ€§ï¼Œå¦‚ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼Œè¿™äº›éƒ½æ˜¯äº‹åŠ¡çš„ ACID å±æ€§ã€‚ç†è§£è¿™äº›ç‰¹æ€§ä»¥åŠå®ƒä»¬å¦‚ä½•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§æ˜¯éå¸¸é‡è¦çš„ã€‚

å…¶æ¬¡ï¼Œç†è§£äº‹åŠ¡çš„å·¥ä½œåŸç†å’Œå®ç°æœºåˆ¶ä¹Ÿæ˜¯å­¦ä¹ äº‹åŠ¡çš„é‡è¦éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åº“ç³»ç»Ÿå¦‚ä½•ä½¿ç”¨é”å’Œå…¶ä»–å¹¶å‘æ§åˆ¶æœºåˆ¶æ¥å®ç°äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œå¦‚ä½•ä½¿ç”¨æ—¥å¿—å’Œæ¢å¤æœºåˆ¶æ¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ï¼Œç­‰ç­‰ã€‚è¿™äº›çŸ¥è¯†å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®åº“ç³»ç»Ÿçš„å†…éƒ¨å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•è®¾è®¡å’Œä¼˜åŒ–æ•°æ®åº“åº”ç”¨ç¨‹åºã€‚

å†æ¬¡ï¼Œç†è§£ä¸åŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä»¥åŠå®ƒä»¬çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ä¸åŒçš„éš”ç¦»çº§åˆ«æä¾›äº†ä¸åŒçš„å¹¶å‘æ§åˆ¶å’Œæ€§èƒ½æƒè¡¡ï¼Œç†è§£è¿™äº›æƒè¡¡å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚

æœ€åï¼Œé€šè¿‡å®è·µæ¥å­¦ä¹ å’Œç†è§£äº‹åŠ¡ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚é€šè¿‡ç¼–å†™å’Œæ‰§è¡Œäº‹åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£äº‹åŠ¡çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨äº‹åŠ¡ã€‚å®è·µä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£äº‹åŠ¡çš„æ€§èƒ½å½±å“ï¼Œä»¥åŠå¦‚ä½•ä¼˜åŒ–äº‹åŠ¡ä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚

æ€»çš„æ¥è¯´ï¼Œå­¦ä¹ äº‹åŠ¡æ˜¯ä¸€ä¸ªæ·±å…¥ç†è§£æ•°æ®åº“ç³»ç»Ÿçš„è¿‡ç¨‹ï¼Œå®ƒéœ€è¦ç†è®ºçŸ¥è¯†å’Œå®è·µç»éªŒçš„ç»“åˆã€‚é€šè¿‡å­¦ä¹ äº‹åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡æ•°æ®åº“ç³»ç»Ÿï¼Œä»è€Œè®¾è®¡å’Œå®ç°æ›´æœ‰æ•ˆã€æ›´å¯é çš„æ•°æ®åº“åº”ç”¨ç¨‹åºã€‚

> ğŸ“Œ **å¿«é€Ÿè·³è½¬é“¾æ¥**  
> ã€æ¦‚å¿µè§£æã€‘å¯åŠ¨
>
> ã€æ¦‚å¿µè§£æã€‘Day 1 - 10
>
> ã€æ¦‚å¿µè§£æã€‘Day 11 - 20
>
> ã€æ¦‚å¿µè§£æã€‘Day 21 - 30
>
> ã€æ¦‚å¿µè§£æã€‘Day 31 - 40
>
> ã€æ¦‚å¿µè§£æã€‘Day 41 - 50
>
> ã€æ¦‚å¿µè§£æã€‘Day 51 - 60
>
> ã€æ¦‚å¿µè§£æã€‘Day 61 - 70

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘å¯åŠ¨</summary>

[bookmark](https://kuangyichen.com/article/industry)

[bookmark](https://kuangyichen.com/article/start-industry-100-words)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 1 - 10</summary>

[bookmark](https://kuangyichen.com/article/industry-day1)

[bookmark](https://kuangyichen.com/article/industry-day2)

[bookmark](https://kuangyichen.com/article/industry-day3)

[bookmark](https://kuangyichen.com/article/industry-day4)

[bookmark](https://kuangyichen.com/article/industry-day5)

[bookmark](https://kuangyichen.com/article/industry-day6)

[bookmark](https://kuangyichen.com/article/industry-day7)

[bookmark](https://kuangyichen.com/article/industry-day8)

[bookmark](https://kuangyichen.com/article/industry-day9)

[bookmark](https://kuangyichen.com/article/industry-day10)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 11 - 20</summary>

[bookmark](https://kuangyichen.com/article/industry-day11)

[bookmark](https://kuangyichen.com/article/industry-day12)

[bookmark](https://kuangyichen.com/article/industry-day13)

[bookmark](https://kuangyichen.com/article/industry-day14)

[bookmark](https://kuangyichen.com/article/industry-day15)

[bookmark](https://kuangyichen.com/article/industry-day16)

[bookmark](https://kuangyichen.com/article/industry-day17)

[bookmark](https://kuangyichen.com/article/industry-day18)

[bookmark](https://kuangyichen.com/article/industry-day19)

[bookmark](https://kuangyichen.com/article/industry-day20)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 21 - 30</summary>

[bookmark](https://kuangyichen.com/article/industry-day21)

[bookmark](https://kuangyichen.com/article/industry-day22)

[bookmark](https://kuangyichen.com/article/industry-day23)

[bookmark](https://kuangyichen.com/article/industry-day24)

[bookmark](https://kuangyichen.com/article/industry-day25)

[bookmark](https://kuangyichen.com/article/industry-day26)

[bookmark](https://kuangyichen.com/article/industry-day27)

[bookmark](https://kuangyichen.com/article/industry-day28)

[bookmark](https://kuangyichen.com/article/industry-day29)

[bookmark](https://kuangyichen.com/article/industry-day30)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 31 - 40</summary>

[bookmark](https://kuangyichen.com/article/industry-day31)

[bookmark](https://kuangyichen.com/article/industry-day32)

[bookmark](https://kuangyichen.com/article/industry-day33)

[bookmark](https://kuangyichen.com/article/industry-day34)

[bookmark](https://kuangyichen.com/article/industry-day35)

[bookmark](https://kuangyichen.com/article/industry-day36)

[bookmark](https://kuangyichen.com/article/industry-day37)

[bookmark](https://kuangyichen.com/article/industry-day38)

[bookmark](https://kuangyichen.com/article/industry-day39)

[bookmark](https://kuangyichen.com/article/industry-day40)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 41 - 50</summary>

[bookmark](https://kuangyichen.com/article/industry-day41)

[bookmark](https://kuangyichen.com/article/industry-day42)

[bookmark](https://kuangyichen.com/article/industry-day43)

[bookmark](https://kuangyichen.com/article/industry-day44)

[bookmark](https://kuangyichen.com/article/industry-day45)

[bookmark](https://kuangyichen.com/article/industry-day46)

[bookmark](https://kuangyichen.com/article/industry-day47)

[bookmark](https://kuangyichen.com/article/industry-day48)

[bookmark](https://kuangyichen.com/article/industry-day49)

[bookmark](https://kuangyichen.com/article/industry-day50)

</details>

<details>
<summary>ã€æ¦‚å¿µè§£æã€‘Day 51 - 60</summary>

[bookmark](https://kuangyichen.com/article/industry-day51)

[bookmark](https://kuangyichen.com/article/industry-day52)

[bookmark](https://kuangyichen.com/article/industry-day53)

[bookmark](https://kuangyichen.com/article/industry-day54)

[bookmark](https://kuangyichen.com/article/industry-day55)

[bookmark](https://kuangyichen.com/article/industry-day56)

[bookmark](https://kuangyichen.com/article/industry-day57)

[bookmark](https://kuangyichen.com/article/industry-day58)

[bookmark](https://kuangyichen.com/article/industry-day59)

</details>
