---
password: ""
icon: ""
date: "2023-11-26"
type: Post
category: 行业概念
slug: industry-day66
tags:
  - 行业概念
  - 文字
  - 思考
  - MySQL
summary: ""
title: Day66【概念解析】InnoDB Data Dictionary
status: Published
urlname: ce076f3a-537a-48de-8331-0b2d01a2b455
updated: "2023-11-27 03:04:00"
---

# 整理定义

**中文名称：** 数据字典

**英文名称：** Data Dictionary

**InnoDB 数据字典**由内部系统表组成，这些系统表包含用于跟踪表、索引和表列等对象的元数据。这些元数据物理存储在 InnoDB 系统表空间中。由于历史原因，数据字典中的元数据在一定程度上与存储在 InnoDB 表元数据文件（.frm 文件）中的信息有所重叠。

数据字典是数据库管理系统中存储关于数据库结构详细信息的系统表的集合。在 InnoDB 存储引擎中，数据字典包含了表、列、索引、外键等对象的元数据。这些信息对于数据库来说至关重要，因为它们帮助数据库理解如何组织数据、如何执行查询和如何维护数据的完整性。

![MySQL 5.7版本](https://image.kuangyichen.com/image/innodb-architecture-5-7.png)

![MySQL 8.0版本](https://image.kuangyichen.com/image/innodb-architecture-8-0.png)

# 复述展开

## 关于数据字典的历史

在早期版本的 MySQL 中，InnoDB 使用了一种混合的方式来存储表的元数据。一部分元数据存储在 InnoDB 自己的系统表空间中，这部分包括了表的结构、索引信息等。而另一部分，如表的定义，则存储在 MySQL 的.frm 文件中。这种设计意味着 InnoDB 的数据字典和 MySQL 的表定义文件之间存在一定程度的重叠。

这种设计在实际使用中带来了一些问题。例如，如果.frm 文件和 InnoDB 的数据字典之间的信息不一致，可能会导致错误或数据不一致的问题。此外，.frm 文件是基于 ISAM 存储引擎的遗留文件格式，它并不是为 InnoDB 这样的高级存储引擎设计的，因此存在效率和灵活性的限制。

随着`MySQL 5.6和5.7版本`的发布，InnoDB 的数据字典得到了改进，但仍然依赖于.frm 文件。直到 MySQL 8.0 的推出，InnoDB 的数据字典才经历了重大的变革。在`MySQL 8.0`中，引入了一个全新的数据字典架构，它完全在 InnoDB 内部实现，不再依赖于.frm 文件。这意味着所有的表元数据现在都存储在 InnoDB 的系统表空间中，这提高了元数据的操作效率，简化了代码基础，并且解决了历史遗留问题。

【可以从上图中的`MySQL 5.7`的架构图与`MySQL 8.0`的架构图对应的差异看出来】

新的数据字典架构使得数据库的启动和升级过程更加可靠，因为它减少了由于元数据不一致导致的问题。此外，它还为未来的功能扩展和性能优化提供了基础。总的来说，InnoDB 的数据字典经历了从依赖于外部文件到完全内部化的转变，这是对 InnoDB 存储引擎持续改进和优化的一个证明。

InnoDB 的数据字典是一个内部系统，它为数据库中的所有对象（如表、视图、存储过程等）提供了一个详细的信息目录。它不仅包含了对象的名称和类型，还包括了对象的结构，比如表的列信息、数据类型、默认值以及列与列之间的关系。此外，数据字典还记录了索引信息，包括索引的类型和它所涉及的列，以及外键约束等。

数据字典对于数据库的运行至关重要。当执行一个查询时，数据库会参考数据字典来确定如何最有效地访问所需的数据。同时，当进行数据修改时，数据字典也会确保所有的数据操作都遵守了数据库的规则和约束，保证数据的一致性和完整性。

# 理解体会

数据字典可以被看作是数据库的“百科全书”。它详尽地记录了数据库的结构和规则，就像一个图书馆的索引卡片一样，帮助数据库管理系统快速定位和理解数据的存储方式。对于数据库管理员和开发者来说，数据字典是一个宝贵的资源，因为它提供了数据库内部结构的深入了解，这对于维护、优化和故障排除都是非常有帮助的。

在实际使用中，我们通常不直接与数据字典交互，因为它是由数据库管理系统自动维护的。但是，了解它的存在和作用对于理解数据库的内部工作原理是非常有益的。如果你是一个数据库管理员或者开发者，你可能需要查询数据字典来获取关于数据库对象的信息，这对于调试问题或者优化性能都是必不可少的。
